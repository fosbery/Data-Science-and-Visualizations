---
title: "Data Visualization Project - U.S. Police Officer Shootings"
author: "James Fung"
date: "9/18/2018"
output: html_document
---

```{r setup, results='hide', warning=FALSE, message=FALSE}
#Import the shooting data and load libraries.
library(tidyverse)
library(ggplot2)
library(reshape2)
library(gridExtra)
shootings <- read_csv("/Users/jamesfung/Dropbox/Graduate School/Data Science and Visualizations/Projects/Data Visualization Mini Project/fatal-police-shootings-data.csv")
```

```{r}
#Quick look at the dataset.
#shootings
```

#Tasks

*Some data manipulation and some exploratory analysis for comments below*
```{r}
#Recategorize the "armed" category.
armedcounts <- as.data.frame(table(shootings$armed))
colnames(armedcounts) <- c("armed","armedcount")
shootings2 <- merge(shootings,armedcounts,by='armed')
shootings2 <- shootings2[order(shootings2$id),]
shootings2$armedcat <- ifelse(shootings2$armedcount < 50,'other',shootings2$armed)

#What is the average age and median age of a individual?
mean(shootings2$age,na.rm=TRUE)
median(shootings2$age,na.rm=TRUE)

#What city did most of the crimes occur in?
cityinfo <- as.data.frame(table(shootings2$city))
cityinfo <- cityinfo[order(cityinfo$Freq,decreasing=TRUE),]
#head(cityinfo)

#What state did most of the crimes occur in?
stateinfo <- as.data.frame(table(shootings2$state))
stateinfo <- stateinfo[order(stateinfo$Freq,decreasing=TRUE),]
#head(stateinfo)
```


#Part 1 - Univariate Graphs
```{r}
#Produce an appropiate graphical display for each variable. 
plot1<-ggplot(shootings) + geom_histogram(aes(x=date),binwidth = 20, fill='grey',color='black') + ggtitle('Shootings by Year') + xlab('Year') + ylab('Count')
plot2<-ggplot(shootings) + geom_bar(aes(x=manner_of_death), fill='grey',color='black') + ggtitle('Manner of Death') + xlab('Manner') + ylab('Count')
plot3<-ggplot(shootings) + geom_bar(aes(x=armed), fill='grey',color='black') + ggtitle("Individual's Weapon") + xlab('Weapon') + ylab('Count')
plot4<-ggplot(shootings2) + geom_bar(aes(x=armedcat), fill='grey',color='black') + ggtitle("Individual's Weapon Categorized") + xlab('Weapon') + ylab('Count')
plot5<-ggplot(shootings) + geom_histogram(aes(x=age), fill='grey',color='black') + ggtitle("Age of individual") + xlab('Age') + ylab('Count')
plot6<-ggplot(shootings) + geom_bar(aes(x=gender), fill='grey',color='black') + ggtitle("Gender of individual") + xlab('Gender') + ylab('Count')
plot7<-ggplot(shootings) + geom_bar(aes(x=race), fill='grey',color='black') + ggtitle("Race of individual") + xlab('Race') + ylab('Count')
plot8<-ggplot(shootings) + geom_bar(aes(x=city), fill='grey',color='black') + ggtitle("City Crime Occured") + xlab('City') + ylab('Count')
plot9<-ggplot(shootings) + geom_bar(aes(x=state), fill='grey',color='black') + ggtitle("State Crime Occured") + xlab('State') + ylab('Count')
plot10<-ggplot(shootings) + geom_bar(aes(x=signs_of_mental_illness), fill='grey',color='black') + ggtitle("Mental Illness Reported") + xlab('Y/N') + ylab('Count')
plot11<-ggplot(shootings) + geom_bar(aes(x=threat_level), fill='grey',color='black') + ggtitle("Threat Level of individual") + xlab('Level') + ylab('Count')
plot12<-ggplot(shootings) + geom_bar(aes(x=flee), fill='grey',color='black') + ggtitle("Did the individual flee?") + xlab('Method') + ylab('Count')
plot13<-ggplot(shootings) + geom_bar(aes(x=body_camera), fill='grey',color='black') + ggtitle("Was there a body camera?") + xlab('Y/N') + ylab('Count')
grid.arrange(plot1,plot2)
grid.arrange(plot3,plot4)
grid.arrange(plot5,plot6,plot7)
grid.arrange(plot8,plot9)
head(cityinfo)
head(stateinfo)
grid.arrange(plot10,plot11,plot12,plot13)
```

This data set explores every fatal shooting in the U.S. by a police officer since 2015 - a hotly debated topic. By plotting every variable on a uni-variate basis, one can get a quick glimpse of what the data is showing.

Over the course of 3 years, although there are fluctuations, each year follows the general trend of all the other years. There appears to be about 50 shootings per month, on average. Most individuals are shot, with a very small proportion of the individuals being both shot and tasered. Many individuals also possess some sort of weapon - with the majority of them possessing a firearm. 

In terms of demographics of the individual, there is a slight right skew of the age, suggesting that individuals tend to be on the younger side. The median and mode of the age are 35 and 37 respectively. Most of the individuals are male, and in order of greatest to least, white, black, then Hispanic. A small proportion are Asian, Native American, or other. 

In terms of location, there are far too many cities to display on a graph. In looking at the data from a tabular view, the top 5 cities where shootings occurred in are L.A., Phoenix, Houston, Las Vegas, and Columbus. In terms of states, the top 5 are CA, TX, FL, AZ, and CO. These tables are above. 

Additional info contains that two-thirds of the individuals had no prior case of mental illness. More than half of the individuals had attacked the officer, and a majority of the individuals did not flee the scene. Nearly all of the incidents also had no body camera present on the officer. 



#Part 2 - Bivariate Graphs
```{r}
#Is there a trend in the weapon with race?
ggplot(shootings2) + geom_bar(aes(x=race,fill=armedcat)) + ggtitle('Race and Weapon') + xlab('Individual Race')
```

In this first plot, I wanted to examine if certain races had more instances of brandishing certain weapons, which might suggest why these deaths occurred. However, looking at across races, it seems that in nearly all race categories the weapon distribution is fairly even, suggesting that it may not be a factor in why the individual was shot. 

```{r}
#Is there a further trend in the weapon and danger level?
ggplot(shootings2) + geom_bar(aes(x=armedcat,fill=threat_level)) + ggtitle('Individual Weapon and Threat Level') + xlab('Individual Weapon')
```

In this next plot, I wanted to examine if any of these deaths were unwarranted. In the above chart, a majority of officers responded that they perceived it to be an attack when they had a gun, a logical conclusion. However, in the knife category nearly two thirds of the individuals that were shot had an "other" threat level (unsure of the meaning of "other"), suggesting that there might be a possibly that a shooting was unnecessary.

```{r}
ggplot(shootings2) + geom_bar(aes(x=race,fill=threat_level)) + ggtitle('Individual Race and Threat Level') + xlab('Individual Race')
```

Could there have been any racial profiling occurring? In this plot, I examined if there is any possibility that officers treat certain races as having a higher threat level than others. Visually, the proportion of "attack" threat level in each race is very similar to one another, suggesting that profiling may not have occurred. This would be good scenario for a hypothesis test. 

```{r}
#Is there a relationship between body cameras and time?
ggplot(shootings) + geom_histogram(aes(x=date,fill=body_camera),color='grey',binwidth = 100) + ggtitle('Body Cameras Over Time')
```

Over recent years there has been a shift to implement body cameras with more officers so that officials could judge whether or not the shooting was just. In this plot, I wanted to examine if officers around the country are being better equipped with body cameras. It is clear that between 2015 and to the middle of 2016, there was an upward trend in officers wearing body cameras. However, this suddenly drops, and in 2017 and 2018 the proportion of body cameras to none is increasing. 

```{r}
ggplot(shootings2) + geom_histogram(aes(x=age,fill=race),color='black',binwidth=10) + ggtitle('Age and individual Race') + xlab('individual Age')
```

Does age and race play a factor in shootings? Visually it appears so - for individuals under the age of 25, there seem to be slightly more Black youths that are shot than White youths. However in the overall population, White individuals that are shot and killed are nearly double that of Black individuals (Simpsons paradox?) This trend is only present in individuals under the age of 25. 

It is also interesting to note that in the 50 age range, White individuals dominate the numbers as opposed to other races.

#Part 3 - Three or more variables
```{r}
#Is there a relationship between age, threat level, and race?
ggplot(shootings2) + geom_boxplot(aes(x=threat_level,y=age,fill=race),color='black') + ggtitle('Age, Race, and Threat Level') + xlab('Threat Level')
```

It is well known that many of the persons shot in recent news were younger, Black individuals. In this plot, I wanted to examine the threat level characteristics of individuals from different race categories, which as a result may create racial profiling. 

In examining the "attack" threat level, it is clear that the average age of a Black individual is slightly less than that of other minorities, and much less than that of a White individual. This trend is also followed in the "other" and "undetermined" category. The only race that is lower than that of Black individuals is "other." The data suggests that younger Black individuals tend to attack officers more (or the officer perceives it as an attack) and may support racial profiling.

```{r}
#Is there a relationship between age, weapon, and race?
ggplot(shootings2) + geom_boxplot(aes(x=armedcat,y=age,fill=race),color='black') + ggtitle('Age, Race, and Weapon') + xlab('Weapon')
```

To further expand on the previous graph, could younger individuals from certain races have more threatening weapons, and as a result cause the officers to label the incident as an "attack" more often? In examining the "gun" category, it is clear here that Black individuals that were shot carry guns at a much younger age than that of other races. This may suggest why officers in the previous graph perceived the incident to be an attack more often.

#Part 4 - Race as a facet
```{r}
#Do certain races have higher signs of mental illness - and does that influence the threat level?
ggplot(shootings2) + geom_bar(aes(x=threat_level,fill=signs_of_mental_illness),color='black') + ggtitle('Age, Race, and Weapon') + xlab('Weapon') + facet_wrap(~race)
```

Do certain races have higher signs of mental illness - and does that influence the threat level? Visually, it appears that White individuals have higher incidents of mental illness and might possibly relate to the police indicating it was an attack threat level. This proportion seems to be a little less than 1/3 of White individuals. Examining the other racial groups that has visible plots, the proportion of individuals who attacked the officer with mental illness is small, around 10%. 

#Part 5 - Favorite Graph
```{r}
#Is there a relationship between age, weapon, and race?
ggplot(shootings2) + geom_boxplot(aes(x=race,y=age,fill=race)) + ggtitle('Examining Weapon, Age, and Race') + xlab('Race') + facet_wrap(~armedcat) + scale_fill_discrete(name='Race Legend',labels=c('Asian','Black','Hispanic','Native American','Other','White','N/A'))
```

This is a modified graph of the 2nd one from part 4. Rather than having all of the weapons in one graph, it was split into a facet for easier interpretation.

This graph was my personal favorite because it shows possible reasons why police officers might racially profile potential criminals, particularly younger individuals that are Black. This is a common narrative among the population here in the U.S.

As said before, it is clear that when a individual has a gun, the average age of a Black individual (approximately 28) is younger than that of all other races, especially when compared to White individual (approximately 38.) In the knife and other category, the average ages are much closer together across races.  If an officer has knowledge of this, they may extrapolate this "characteristic" information and be warier of younger, Black individuals as they might be more likely to carry a gun. Furthermore, this perceived threat level could possibly tie into prior graphs, where we saw that for younger individuals, the proportion of Black and White individuals that are shot are nearly the same. 

